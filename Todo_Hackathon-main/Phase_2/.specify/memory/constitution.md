# Todo Hackathon — Phase II Constitution

<!--
Sync Impact Report:
- Version: NEW → 1.0.0 (Initial constitution)
- Rationale: First constitution for Phase II full-stack web application project
- Modified principles: N/A (new document)
- Added sections: All (initial creation)
- Removed sections: None
- Templates requiring updates:
  ✅ constitution.md (this file)
  ⚠ plan-template.md (pending validation)
  ⚠ spec-template.md (pending validation)
  ⚠ tasks-template.md (pending validation)
- Follow-up TODOs: Validate dependent templates align with new principles
-->

## Core Principles

### I. Spec-Driven Development

**MUST** follow strict spec-driven workflow with no skipping or merging of steps. Each phase (specify → plan → tasks → implement) is a contract that must be completed before proceeding to the next. Scope expansion beyond approved specs is prohibited.

**Rationale**: Ensures predictable outcomes, prevents scope creep, and maintains clear traceability from requirements to implementation. Specs act as binding contracts between planning and execution phases.

### II. AI-Generated Implementation

All implementation code **MUST** be generated by Claude Code. Manual coding is prohibited in Phase II. Human input is limited to requirements, approvals, and validation.

**Rationale**: Maintains consistency with hackathon constraints, ensures reproducibility, and validates AI-driven development workflows. Human role is strategic (what to build) rather than tactical (how to code).

### III. Workspace Isolation

All work **MUST** remain inside the `/phase-2` folder. No dependencies, configurations, or outputs may exist outside this boundary. Deliverables must be self-contained.

**Rationale**: Ensures project portability, prevents contamination of other workspaces, and maintains clear project boundaries for evaluation and deployment.

### IV. Documentation & Traceability

Every step **MUST** be documented with full traceability:
- Specs document requirements and acceptance criteria
- Plans document architectural decisions and design rationale
- Tasks document implementation steps with test cases
- PHRs (Prompt History Records) capture all AI interactions
- ADRs (Architecture Decision Records) document significant decisions

**Rationale**: Enables audit trails, facilitates knowledge transfer, supports debugging, and provides evidence of systematic development process.

### V. Security & Multi-User Isolation

**MUST** enforce authentication and authorization at all layers:
- Authentication mandatory for all API endpoints
- All database queries filtered by authenticated `user_id`
- JWT tokens used for session management
- Shared secret (`BETTER_AUTH_SECRET`) for token validation
- No cross-user data leakage permitted

**Rationale**: Protects user privacy, prevents unauthorized access, ensures data integrity, and meets baseline security requirements for multi-tenant applications.

### VI. Technology Stack Standards

**MUST** use approved technology stack without substitutions:
- **Frontend**: Next.js (App Router), TypeScript, Tailwind CSS
- **Backend**: FastAPI, SQLModel, REST API
- **Database**: Neon Serverless PostgreSQL
- **Authentication**: Better Auth + JWT

**Rationale**: Ensures consistency, leverages proven integrations, and maintains compatibility with project infrastructure and evaluation criteria.

## Constraints & Exclusions

### Prohibited Technologies
- No AI agents, MCP servers, or chatbot features in Phase II
- No manual code editing (all code via Claude Code)
- No work outside `/phase-2` folder

### Architectural Constraints
- REST API only (no GraphQL, gRPC, or WebSockets)
- Synchronous request/response patterns
- Server-side rendering with Next.js App Router
- Relational data model (PostgreSQL)

### Scope Boundaries
- Single-tenant architecture (user isolation via `user_id` filtering)
- CRUD operations for tasks only
- Basic authentication (no OAuth, SSO, or MFA)
- No real-time collaboration features
- No file uploads or media handling

## Development Workflow

### Phase Sequence (STRICT)
1. **Specify** (`/sp.specify`): Define requirements, acceptance criteria, and constraints
2. **Plan** (`/sp.plan`): Design architecture, data models, and API contracts
3. **Tasks** (`/sp.tasks`): Break down into testable implementation tasks
4. **Implement** (`/sp.implement`): Execute tasks with TDD approach
5. **Validate**: Run tests, verify acceptance criteria, document outcomes

### Quality Gates
Each phase must pass before proceeding:
- **Specify**: User approval of requirements and scope
- **Plan**: User approval of architecture and design decisions
- **Tasks**: User approval of task breakdown and test cases
- **Implement**: All tests passing, acceptance criteria met
- **Validate**: End-to-end functionality verified

### Testing Requirements
- Unit tests for business logic
- Integration tests for API endpoints
- Database migration tests
- Authentication/authorization tests
- End-to-end user flow tests

### Documentation Requirements
- All specs in `/phase-2/specs/<feature>/spec.md`
- All plans in `/phase-2/specs/<feature>/plan.md`
- All tasks in `/phase-2/specs/<feature>/tasks.md`
- PHRs in `history/prompts/` (routed by stage)
- ADRs in `history/adr/` (for significant decisions)

## Governance

### Amendment Process
1. Propose changes with rationale and impact analysis
2. Update version number (semantic versioning: MAJOR.MINOR.PATCH)
3. Document changes in Sync Impact Report
4. Update dependent templates and documentation
5. Obtain user approval before finalizing

### Version Policy
- **MAJOR**: Backward-incompatible principle changes or removals
- **MINOR**: New principles or material expansions
- **PATCH**: Clarifications, wording fixes, non-semantic refinements

### Compliance
- All work must verify compliance with constitution principles
- Deviations require explicit justification and approval
- Constitution supersedes all other practices and conventions
- Regular reviews to ensure principles remain relevant

### Conflict Resolution
- Constitution principles take precedence over external conventions
- When principles conflict, security and user isolation take priority
- Ambiguities resolved through user consultation (Human as Tool)

**Version**: 1.0.0 | **Ratified**: 2026-02-07 | **Last Amended**: 2026-02-07
